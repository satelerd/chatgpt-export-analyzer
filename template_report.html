<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Analytics Pro - Reporte Interactivo Avanzado</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #0a0a0a;
            --secondary-bg: #111111;
            --accent-bg: #1a1a1a;
            --card-bg: #1e1e1e;
            --neon-green: #00ff41;
            --neon-blue: #00d4ff;
            --neon-purple: #b300ff;
            --neon-pink: #ff0080;
            --neon-yellow: #ffff00;
            --neon-orange: #ff6b35;
            --neon-cyan: #4ecdc4;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #888888;
            --border-color: #333333;
            --glow-green: 0 0 20px #00ff41;
            --glow-blue: 0 0 20px #00d4ff;
            --glow-purple: 0 0 20px #b300ff;
            --glow-pink: 0 0 20px #ff0080;
            --glow-yellow: 0 0 20px #ffff00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--primary-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            line-height: 1.6;
        }

        /* Efectos de fondo avanzados */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0, 255, 65, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 212, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(179, 0, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(255, 0, 128, 0.1) 0%, transparent 50%);
            animation: backgroundPulse 12s ease-in-out infinite alternate;
            z-index: -2;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, transparent 30%, rgba(0, 255, 65, 0.03) 50%, transparent 70%),
                linear-gradient(-45deg, transparent 30%, rgba(0, 212, 255, 0.03) 50%, transparent 70%);
            animation: backgroundShift 20s linear infinite;
            z-index: -1;
        }

        @keyframes backgroundPulse {
            0% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 0.4; transform: scale(1); }
        }

        @keyframes backgroundShift {
            0% { transform: translateX(-100%) translateY(-100%); }
            100% { transform: translateX(100%) translateY(100%); }
        }

        /* Part√≠culas avanzadas */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 8s linear infinite;
        }

        .particle:nth-child(odd) {
            background: var(--neon-green);
            box-shadow: var(--glow-green);
        }

        .particle:nth-child(even) {
            background: var(--neon-blue);
            box-shadow: var(--glow-blue);
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes launch-glow {
            0% { 
                box-shadow: 0 0 15px rgba(255, 107, 53, 0.8);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 25px rgba(255, 107, 53, 1);
                transform: scale(1.05);
            }
        }

        /* Header √©pico */
        .header {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 50%, var(--card-bg) 100%);
            border-bottom: 3px solid var(--neon-green);
            box-shadow: var(--glow-green);
            padding: 3rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 255, 65, 0.1), transparent);
            animation: headerShine 4s linear infinite;
        }

        @keyframes headerShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .header h1 {
            font-family: 'Orbitron', monospace;
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-green), var(--neon-blue), var(--neon-purple), var(--neon-pink));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 4s ease-in-out infinite;
            text-shadow: 0 0 40px rgba(0, 255, 65, 0.8);
            position: relative;
            z-index: 1;
            margin-bottom: 1rem;
        }

        .header .subtitle {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            color: var(--neon-cyan);
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
            position: relative;
            z-index: 1;
        }

        .header .stats-preview {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
            position: relative;
            z-index: 1;
        }

        .header .stat-preview {
            text-align: center;
        }

        .header .stat-preview .number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--neon-yellow);
            text-shadow: 0 0 15px rgba(255, 255, 0, 0.6);
        }

        .header .stat-preview .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Navegaci√≥n */
        .nav {
            background: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
        }

        .nav-item {
            padding: 0.5rem 1.5rem;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .nav-item:hover, .nav-item.active {
            border-color: var(--neon-green);
            color: var(--neon-green);
            box-shadow: var(--glow-green);
            transform: translateY(-2px);
        }

        /* Container principal */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Secciones */
        .section {
            margin: 4rem 0;
            opacity: 0;
            transform: translateY(50px);
            animation: fadeInUp 1s ease forwards;
        }

        .section:nth-child(1) { animation-delay: 0.2s; }
        .section:nth-child(2) { animation-delay: 0.4s; }
        .section:nth-child(3) { animation-delay: 0.6s; }
        .section:nth-child(4) { animation-delay: 0.8s; }
        .section:nth-child(5) { animation-delay: 1.0s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            color: var(--neon-blue);
            text-align: center;
            margin-bottom: 3rem;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.6);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            border-radius: 2px;
        }

        /* Grid de estad√≠sticas avanzado */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            border-color: var(--neon-green);
            box-shadow: var(--glow-green);
            transform: translateY(-10px) scale(1.02);
        }

        .stat-card h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.3rem;
            color: var(--neon-green);
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
        }

        .stat-value {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .stat-trend {
            font-size: 0.9rem;
            color: var(--neon-cyan);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .trend-up { color: var(--neon-green); }
        .trend-down { color: var(--neon-pink); }
        .trend-neutral { color: var(--neon-yellow); }

        /* Gr√°fico GitHub Style mejorado */
        .github-charts-container {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem 0;
            position: relative;
            overflow: hidden;
        }

        .year-chart-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            border: 1px solid rgba(179, 0, 255, 0.3);
            box-shadow: 0 0 20px rgba(179, 0, 255, 0.1);
        }

        .year-title {
            color: var(--accent-color);
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            text-shadow: 0 0 20px rgba(179, 0, 255, 0.6);
        }

        .year-chart {
            margin-top: 1rem;
        }

        .github-chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(0, 255, 65, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(0, 212, 255, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .chart-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            color: var(--neon-blue);
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 0 0 25px rgba(0, 212, 255, 0.6);
            position: relative;
            z-index: 1;
        }

        .github-chart {
            display: grid;
            grid-template-columns: 40px repeat(auto-fit, minmax(16px, 1fr));
            grid-template-rows: repeat(7, 16px);
            gap: 4px;
            justify-content: start;
            position: relative;
            z-index: 1;
            max-width: 100%;
            overflow-x: auto;
            padding: 1rem;
            align-items: center;
        }

        .github-day {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .github-day.level-0 { background: #161b22; }
        .github-day.level-1 { background: #0e4429; }
        .github-day.level-2 { background: #006d32; }
        .github-day.level-3 { background: #26a641; }
        .github-day.level-4 { background: #39d353; }
        .github-day.level-launch { 
            background: linear-gradient(45deg, #ff6b35, #f7931e, #ffd700);
            animation: launch-glow 2s ease-in-out infinite alternate;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.8);
        }

        .github-day:hover {
            transform: scale(2);
            z-index: 10;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
        }

        /* Heatmap de actividad */
        .heatmap-container {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem 0;
            position: relative;
            overflow: hidden;
        }

        .heatmap {
            display: grid;
            grid-template-columns: repeat(24, 1fr);
            gap: 2px;
            margin-top: 2rem;
        }

        .heatmap-cell {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .heatmap-cell:hover {
            transform: scale(1.5);
            z-index: 10;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.8);
        }

        /* Gr√°ficos avanzados */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 3rem;
            margin: 3rem 0;
        }

        .chart-container {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chart-container:hover {
            border-color: var(--neon-purple);
            box-shadow: var(--glow-purple);
        }

        .chart-container h3 {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-purple);
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 0 0 20px rgba(179, 0, 255, 0.6);
        }

        .chart-container canvas {
            max-height: 400px;
        }

        /* An√°lisis de sentimientos */
        .sentiment-analysis {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem 0;
            position: relative;
            overflow: hidden;
        }

        .sentiment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .sentiment-card {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .sentiment-card.positive {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.1), rgba(0, 255, 65, 0.05));
            border: 1px solid var(--neon-green);
        }

        .sentiment-card.negative {
            background: linear-gradient(135deg, rgba(255, 0, 128, 0.1), rgba(255, 0, 128, 0.05));
            border: 1px solid var(--neon-pink);
        }

        .sentiment-card.neutral {
            background: linear-gradient(135deg, rgba(255, 255, 0, 0.1), rgba(255, 255, 0, 0.05));
            border: 1px solid var(--neon-yellow);
        }

        .sentiment-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
        }

        .sentiment-value {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .sentiment-label {
            font-size: 1.2rem;
            font-weight: 500;
        }

        /* Nube de palabras avanzada */
        .word-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            min-height: 300px;
            align-items: center;
        }

        .word-item {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            color: var(--text-primary);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .word-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .word-item:hover::before {
            left: 100%;
        }

        .word-item:hover {
            transform: scale(1.2) rotate(5deg);
            box-shadow: 0 0 30px rgba(179, 0, 255, 0.6);
            z-index: 10;
        }

        /* Laboratorio Interactivo */
        .lab-container {
            background: linear-gradient(135deg, var(--secondary-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem 0;
            position: relative;
            overflow: hidden;
        }

        .lab-controls {
            margin-bottom: 2rem;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .lab-button {
            background: linear-gradient(135deg, var(--card-bg) 0%, var(--accent-bg) 100%);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 120px;
            justify-content: center;
        }

        .lab-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.3);
            border-color: var(--neon-green);
        }

        .lab-button:active {
            transform: translateY(-2px);
        }

        .button-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .button-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .button-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            opacity: 0.8;
        }

        .lab-results {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            min-height: 300px;
            border: 1px solid var(--border-color);
        }

        .result-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
        }

        .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.6;
        }

        .placeholder-text {
            font-size: 1.1rem;
            text-align: center;
        }

        .lab-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: var(--neon-green);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Efectos especiales para botones */
        .audio-button:hover {
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.3);
            border-color: var(--neon-pink);
        }

        .conversation-button:hover {
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
            border-color: var(--neon-blue);
        }

        .insight-button:hover {
            box-shadow: 0 10px 30px rgba(179, 0, 255, 0.3);
            border-color: var(--neon-purple);
        }

        .full-conversation-button:hover {
            box-shadow: 0 10px 30px rgba(255, 255, 0, 0.3);
            border-color: var(--neon-yellow);
        }

        .first-audio-button:hover {
            box-shadow: 0 10px 30px rgba(255, 165, 0, 0.3);
            border-color: var(--neon-orange);
        }

        .timeline {
            position: relative;
            margin-top: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--neon-green), var(--neon-blue), var(--neon-purple));
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .timeline-item {
            position: relative;
            margin: 2rem 0;
            display: flex;
            align-items: center;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row;
        }

        .timeline-item:nth-child(even) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 1.5rem;
            width: 45%;
            position: relative;
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            border-color: var(--neon-green);
            box-shadow: var(--glow-green);
            transform: scale(1.05);
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: var(--neon-green);
            border-radius: 50%;
            box-shadow: var(--glow-green);
            z-index: 10;
        }

        /* Tooltip avanzado */
        .tooltip {
            position: absolute;
            background: var(--secondary-bg);
            border: 2px solid var(--neon-green);
            border-radius: 10px;
            padding: 1rem 1.5rem;
            font-size: 0.9rem;
            color: var(--text-primary);
            box-shadow: var(--glow-green);
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 300px;
            backdrop-filter: blur(10px);
        }

        .tooltip-title {
            font-weight: 700;
            color: var(--neon-green);
            margin-bottom: 0.5rem;
        }

        /* Loading avanzado */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            flex-direction: column;
            gap: 1rem;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--neon-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive mejorado */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .header .stats-preview {
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .github-chart {
                gap: 3px;
                grid-template-columns: 35px repeat(auto-fit, minmax(14px, 1fr));
                grid-template-rows: repeat(7, 14px);
            }
            
            .github-day {
                width: 14px;
                height: 14px;
            }

            .year-title {
                font-size: 1.4rem;
            }
            
            .timeline-content {
                width: 80%;
            }
            
            .timeline-item:nth-child(even) {
                flex-direction: row;
            }
        }

        /* Efectos especiales */
        .glitch {
            position: relative;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            animation: glitch-1 0.5s infinite;
            color: var(--neon-pink);
            z-index: -1;
        }

        .glitch::after {
            animation: glitch-2 0.5s infinite;
            color: var(--neon-blue);
            z-index: -2;
        }

        @keyframes glitch-1 {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }

        @keyframes glitch-2 {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(2px, 2px); }
            40% { transform: translate(2px, -2px); }
            60% { transform: translate(-2px, 2px); }
            80% { transform: translate(-2px, -2px); }
        }

        /* Scrollbar personalizado */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--neon-green), var(--neon-blue));
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--neon-blue), var(--neon-purple));
        }
    </style>
</head>
<body>
    <!-- Part√≠culas de fondo -->
    <div class="particles" id="particles"></div>

    <!-- Header √©pico -->
    <header class="header">
        <h1 class="glitch" data-text="ChatGPT Analytics Pro">ChatGPT Analytics Pro</h1>
        <p class="subtitle">Reporte Interactivo Ultra Avanzado</p>
        <div class="stats-preview">
            <div class="stat-preview">
                <div class="number" id="preview-conversations">-</div>
                <div class="label">Conversaciones</div>
            </div>
            <div class="stat-preview">
                <div class="number" id="preview-messages">-</div>
                <div class="label">Mensajes</div>
            </div>
            <div class="stat-preview">
                <div class="number" id="preview-words">-</div>
                <div class="label">Palabras</div>
            </div>
            <div class="stat-preview">
                <div class="number" id="preview-sentiment">-</div>
                <div class="label">Sentimiento</div>
            </div>
        </div>
    </header>

    <!-- Navegaci√≥n -->
    <nav class="nav">
        <div class="nav-container">
            <a href="#overview" class="nav-item active">Resumen</a>
            <a href="#activity" class="nav-item">Actividad</a>
            <a href="#sentiment" class="nav-item">Sentimientos</a>
            <a href="#content" class="nav-item">Contenido</a>
            <a href="#timeline" class="nav-item">Timeline</a>
        </div>
    </nav>

    <!-- Container principal -->
    <div class="container">
        <!-- Secci√≥n 1: Resumen General -->
        <section id="overview" class="section">
            <h2 class="section-title">Resumen General</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Conversaciones</h3>
                    <div class="stat-value" id="total-conversations">-</div>
                    <div class="stat-label">Desde el inicio</div>
                    <div class="stat-trend trend-up">
                        <span>üìà</span> <span>Creciendo constantemente</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Total Mensajes</h3>
                    <div class="stat-value" id="total-messages">-</div>
                    <div class="stat-label">Mensajes enviados</div>
                    <div class="stat-trend trend-up">
                        <span>üí¨</span> <span>Comunicaci√≥n activa</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Total Palabras</h3>
                    <div class="stat-value" id="total-words">-</div>
                    <div class="stat-label">Palabras escritas</div>
                    <div class="stat-trend trend-up">
                        <span>üìù</span> <span>Productividad alta</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Promedio por Conversaci√≥n</h3>
                    <div class="stat-value" id="avg-conversation">-</div>
                    <div class="stat-label">Mensajes promedio</div>
                    <div class="stat-trend trend-neutral">
                        <span>‚öñÔ∏è</span> <span>Equilibrio perfecto</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Longitud Promedio</h3>
                    <div class="stat-value" id="avg-message-length">-</div>
                    <div class="stat-label">Caracteres por mensaje</div>
                    <div class="stat-trend trend-up">
                        <span>üìè</span> <span>Mensajes detallados</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>D√≠a M√°s Activo</h3>
                    <div class="stat-value" id="most-active-day">-</div>
                    <div class="stat-label">Fecha de mayor actividad</div>
                    <div class="stat-trend trend-up">
                        <span>üî•</span> <span>Pico de productividad</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>D√≠as Activos</h3>
                    <div class="stat-value" id="active-days">-</div>
                    <div class="stat-label">D√≠as con actividad</div>
                    <div class="stat-trend trend-up">
                        <span>üìÖ</span> <span>Consistencia diaria</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>D√≠as Inactivos</h3>
                    <div class="stat-value" id="inactive-days">-</div>
                    <div class="stat-label">D√≠as sin actividad</div>
                    <div class="stat-trend trend-down">
                        <span>üò¥</span> <span>D√≠as de descanso</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Porcentaje Activo</h3>
                    <div class="stat-value" id="active-percentage">-</div>
                    <div class="stat-label">% de d√≠as activos</div>
                    <div class="stat-trend trend-up">
                        <span>üìä</span> <span>Nivel de actividad</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>Racha M√°s Larga</h3>
                    <div class="stat-value" id="longest-streak">-</div>
                    <div class="stat-label">D√≠as consecutivos</div>
                    <div class="stat-trend trend-up">
                        <span>üî•</span> <span>M√°xima consistencia</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 2: Actividad -->
        <section id="activity" class="section">
            <h2 class="section-title">An√°lisis de Actividad</h2>
            
            <!-- Gr√°ficos GitHub Style por A√±o -->
            <div class="github-charts-container">
                <h3 class="chart-title">Actividad Diaria - Estilo GitHub</h3>
                <div class="loading" id="github-loading">
                    <div class="spinner"></div>
                    <div class="loading-text">Generando gr√°ficos de actividad por a√±o...</div>
                </div>
                
                <!-- Contenedor para gr√°ficos por a√±o -->
                <div id="github-charts-by-year" style="display: none;">
                    <!-- Los gr√°ficos se generar√°n din√°micamente aqu√≠ -->
                </div>
            </div>

            <!-- Heatmap de actividad -->
            <div class="heatmap-container">
                <h3 class="chart-title">Heatmap de Actividad (D√≠a vs Hora)</h3>
                <div class="loading" id="heatmap-loading">
                    <div class="spinner"></div>
                    <div class="loading-text">Generando heatmap...</div>
                </div>
                <div class="heatmap" id="heatmap" style="display: none;"></div>
            </div>

            <!-- Gr√°ficos de actividad -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h3>Actividad por Hora del D√≠a</h3>
                    <canvas id="hourly-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Actividad Mensual</h3>
                    <canvas id="monthly-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Actividad por D√≠a de la Semana</h3>
                    <canvas id="weekly-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Evoluci√≥n Temporal</h3>
                    <canvas id="timeline-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Evoluci√≥n Acumulada</h3>
                    <canvas id="cumulative-chart"></canvas>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 3: An√°lisis de Sentimientos -->
        <section id="sentiment" class="section">
            <h2 class="section-title">An√°lisis de Sentimientos</h2>
            
            <div class="sentiment-analysis">
                <h3 class="chart-title">Distribuci√≥n de Sentimientos</h3>
                <div class="sentiment-grid">
                    <div class="sentiment-card positive">
                        <div class="sentiment-value" id="positive-messages">-</div>
                        <div class="sentiment-label">Mensajes Positivos</div>
                    </div>
                    <div class="sentiment-card negative">
                        <div class="sentiment-value" id="negative-messages">-</div>
                        <div class="sentiment-label">Mensajes Negativos</div>
                    </div>
                    <div class="sentiment-card neutral">
                        <div class="sentiment-value" id="neutral-messages">-</div>
                        <div class="sentiment-label">Mensajes Neutrales</div>
                    </div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3>Evoluci√≥n del Sentimiento</h3>
                    <canvas id="sentiment-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Distribuci√≥n de Sentimientos</h3>
                    <canvas id="sentiment-distribution"></canvas>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 4: An√°lisis de Contenido -->
        <section id="content" class="section">
            <h2 class="section-title">An√°lisis de Contenido</h2>
            
            <!-- Palabras m√°s usadas -->
            <div class="chart-container">
                <h3>Palabras M√°s Frecuentes</h3>
                <div class="word-cloud" id="word-cloud">
                    <div class="loading">
                        <div class="spinner"></div>
                        <div class="loading-text">Analizando palabras...</div>
                    </div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3>Temas M√°s Frecuentes</h3>
                    <canvas id="topics-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Lenguajes de Programaci√≥n</h3>
                    <canvas id="programming-languages-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>T√©rminos T√©cnicos</h3>
                    <canvas id="technical-terms-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Patrones de Interacci√≥n</h3>
                    <canvas id="interaction-patterns-chart"></canvas>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 5: Laboratorio Interactivo -->
        <section id="lab" class="section">
            <h2 class="section-title">üß™ Laboratorio Interactivo</h2>
            
            <div class="lab-container">
                <h3 class="chart-title">Explora tus Datos de Manera √önica</h3>
                
                <!-- Panel de controles -->
                <div class="lab-controls">
                    <div class="control-group">
                        <button class="lab-button audio-button" id="audio-button">
                            <span class="button-icon">üéµ</span>
                            <span class="button-text">Sonido Aleatorio</span>
                            <span class="button-subtitle">Descubre audio √∫nico</span>
                        </button>
                        
                        <button class="lab-button conversation-button" id="conversation-button">
                            <span class="button-icon">üí¨</span>
                            <span class="button-text">Conversaci√≥n Aleatoria</span>
                            <span class="button-subtitle">Revive una charla pasada</span>
                        </button>
                        
                        <button class="lab-button full-conversation-button" id="full-conversation-button">
                            <span class="button-icon">üìñ</span>
                            <span class="button-text">Conversaci√≥n Completa</span>
                            <span class="button-subtitle">Lee toda una conversaci√≥n</span>
                        </button>
                        
                        <button class="lab-button first-audio-button" id="first-audio-button">
                            <span class="button-icon">üé§</span>
                            <span class="button-text">Primeros 10 Audios</span>
                            <span class="button-subtitle">Tus primeros mensajes de voz</span>
                        </button>
                    </div>
                </div>
                
                <!-- Panel de resultados -->
                <div class="lab-results" id="lab-results">
                    <div class="result-placeholder">
                        <div class="placeholder-icon">‚ú®</div>
                        <div class="placeholder-text">Haz clic en cualquier bot√≥n para comenzar la exploraci√≥n</div>
                    </div>
                </div>
                
                <!-- Estad√≠sticas del laboratorio -->
                <div class="lab-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="total-experiments">0</span>
                        <span class="stat-label">Experimentos Realizados</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="audio-plays">0</span>
                        <span class="stat-label">Audios Reproducidos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="conversations-viewed">0</span>
                        <span class="stat-label">Conversaciones Revisadas</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip">
        <div class="tooltip-title" id="tooltip-title"></div>
        <div id="tooltip-content"></div>
    </div>

    <script>
        // Variables globales
        let statsData = null;
        let githubData = null;
        let currentSection = 'overview';

        // Crear part√≠culas avanzadas
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 80;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                particlesContainer.appendChild(particle);
            }
        }

        // Navegaci√≥n suave
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.section');

            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = item.getAttribute('href').substring(1);
                    
                    // Actualizar navegaci√≥n activa
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Scroll suave a la secci√≥n
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    
                    currentSection = targetId;
                });
            });

            // Detectar secci√≥n visible
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.id;
                        navItems.forEach(nav => {
                            nav.classList.remove('active');
                            if (nav.getAttribute('href') === `#${sectionId}`) {
                                nav.classList.add('active');
                            }
                        });
                    }
                });
            }, { threshold: 0.3 });

            sections.forEach(section => observer.observe(section));
        }

        // Cargar datos
        async function loadData() {
            try {
                const response = await fetch('chatgpt_stats.json');
                statsData = await response.json();
                
                // Actualizar preview del header
                updateHeaderPreview();
                
                // Actualizar estad√≠sticas principales
                updateMainStats();
                
                // Crear visualizaciones
                createGitHubChart();
                createHeatmap();
                createHourlyChart();
                createMonthlyChart();
                createWeeklyChart();
                createTimelineChart();
                createCumulativeChart();
                createSentimentCharts();
                createWordCloud();
                createContentCharts();
                createInteractiveLab();
                
            } catch (error) {
                console.error('Error cargando datos:', error);
                showError('Error cargando los datos. Verifica que chatgpt_stats.json existe.');
            }
        }

        // Actualizar preview del header
        function updateHeaderPreview() {
            document.getElementById('preview-conversations').textContent = 
                formatNumber(statsData.total_conversations);
            document.getElementById('preview-messages').textContent = 
                formatNumber(statsData.total_messages);
            document.getElementById('preview-words').textContent = 
                formatNumber(statsData.total_words);
            document.getElementById('preview-sentiment').textContent = 
                statsData.avg_sentiment ? statsData.avg_sentiment.toFixed(2) : '0.00';
        }

        // Actualizar estad√≠sticas principales
        function updateMainStats() {
            document.getElementById('total-conversations').textContent = 
                formatNumber(statsData.total_conversations);
            document.getElementById('total-messages').textContent = 
                formatNumber(statsData.total_messages);
            document.getElementById('total-words').textContent = 
                formatNumber(statsData.total_words);
            document.getElementById('avg-conversation').textContent = 
                Math.round(statsData.avg_conversation_length);
            document.getElementById('avg-message-length').textContent = 
                Math.round(statsData.avg_message_length || 0);
            document.getElementById('most-active-day').textContent = 
                statsData.most_active_day || 'N/A';
            
            // Nuevas estad√≠sticas de d√≠as activos/inactivos
            if (statsData.days_analysis) {
                document.getElementById('active-days').textContent = 
                    formatNumber(statsData.days_analysis.active_days);
                document.getElementById('inactive-days').textContent = 
                    formatNumber(statsData.days_analysis.inactive_days);
                document.getElementById('active-percentage').textContent = 
                    statsData.days_analysis.active_percentage + '%';
                document.getElementById('longest-streak').textContent = 
                    formatNumber(statsData.days_analysis.longest_active_streak);
            }
        }

        // Formatear n√∫meros
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toLocaleString();
        }

        // Crear gr√°ficos estilo GitHub por a√±o
        function createGitHubChart() {
            const loading = document.getElementById('github-loading');
            const chartsContainer = document.getElementById('github-charts-by-year');
            
            loading.style.display = 'none';
            chartsContainer.style.display = 'block';

            githubData = statsData.github_style_data;
            
            // Organizar datos por a√±o
            const dataByYear = organizeDataByYear(githubData);
            
            // Crear gr√°fico para cada a√±o
            Object.keys(dataByYear).sort().forEach(year => {
                const yearData = dataByYear[year];
                if (yearData.length === 0) return;
                
                // Crear contenedor del a√±o
                const yearContainer = document.createElement('div');
                yearContainer.className = 'year-chart-container';
                yearContainer.innerHTML = `
                    <h4 class="year-title">${year}</h4>
                    <div class="github-chart year-chart" id="github-chart-${year}"></div>
                `;
                
                chartsContainer.appendChild(yearContainer);
                
                // Crear el gr√°fico para este a√±o
                createYearChart(year, yearData);
            });
        }

        // Crear gr√°fico para un a√±o espec√≠fico
        function createYearChart(year, yearData) {
            const chart = document.getElementById(`github-chart-${year}`);
            
            // Organizar datos por semanas
            const weeksData = organizeDataByWeeks(yearData);
            
            // Crear etiquetas de d√≠as de la semana
            const dayLabels = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            
            // Agregar etiquetas de d√≠as
            dayLabels.forEach((dayLabel, index) => {
                const labelElement = document.createElement('div');
                labelElement.textContent = dayLabel;
                labelElement.style.gridColumn = '1';
                labelElement.style.gridRow = index + 1;
                labelElement.style.display = 'flex';
                labelElement.style.alignItems = 'center';
                labelElement.style.justifyContent = 'center';
                labelElement.style.color = 'var(--text-secondary)';
                labelElement.style.fontSize = '0.8rem';
                labelElement.style.fontWeight = '500';
                chart.appendChild(labelElement);
            });
            
            // Crear cuadraditos para cada d√≠a
            weeksData.forEach((week, weekIndex) => {
                week.forEach((day, dayIndex) => {
                    const dayElement = document.createElement('div');
                    
                    if (day) {
                        // D√≠a con datos
                        const levelClass = day.special_level || day.level;
                        dayElement.className = `github-day level-${levelClass}`;
                        
                        if (day.special_level === 'launch') {
                            dayElement.title = `${day.date}: üöÄ D√çA DEL LANZAMIENTO DE CHATGPT - ${day.count} conversaciones`;
                        } else {
                            dayElement.title = `${day.date}: ${day.count} conversaciones`;
                        }
                        
                        // Tooltip avanzado
                        dayElement.addEventListener('mouseenter', (e) => {
                            const date = new Date(day.date);
                            const formattedDate = date.toLocaleDateString('es-ES', {
                                weekday: 'long',
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            });
                            
                            if (day.special_level === 'launch') {
                                showTooltip(e, `üöÄ ${formattedDate}`, `D√çA DEL LANZAMIENTO DE CHATGPT\n${day.count} conversaciones`);
                            } else {
                                showTooltip(e, formattedDate, `${day.count} conversaciones`);
                            }
                        });
                        
                        dayElement.addEventListener('mouseleave', hideTooltip);
                    } else {
                        // D√≠a sin datos
                        dayElement.className = 'github-day level-0';
                        dayElement.title = 'Sin actividad';
                    }
                    
                    // Posicionar en el grid
                    dayElement.style.gridColumn = weekIndex + 2; // +2 porque la primera columna son las etiquetas
                    dayElement.style.gridRow = dayIndex + 1;
                    
                    chart.appendChild(dayElement);
                });
            });
        }

        // Organizar datos por a√±o
        function organizeDataByYear(data) {
            const dataByYear = {};
            
            data.forEach(day => {
                const year = day.date.split('-')[0];
                if (!dataByYear[year]) {
                    dataByYear[year] = [];
                }
                dataByYear[year].push(day);
            });
            
            return dataByYear;
        }

        // Organizar datos por semanas
        function organizeDataByWeeks(data) {
            const weeks = [];
            let currentWeek = new Array(7).fill(null);
            
            data.forEach(day => {
                const date = new Date(day.date);
                const dayOfWeek = date.getDay(); // 0 = Domingo, 1 = Lunes, etc.
                
                // Si es domingo y ya hay una semana, empezar nueva semana
                if (dayOfWeek === 0 && currentWeek.some(d => d !== null)) {
                    weeks.push(currentWeek);
                    currentWeek = new Array(7).fill(null);
                }
                
                currentWeek[dayOfWeek] = day;
            });
            
            // Agregar la √∫ltima semana si no est√° vac√≠a
            if (currentWeek.some(d => d !== null)) {
                weeks.push(currentWeek);
            }
            
            return weeks;
        }

        // Crear heatmap
        function createHeatmap() {
            const loading = document.getElementById('heatmap-loading');
            const heatmap = document.getElementById('heatmap');
            
            loading.style.display = 'none';
            heatmap.style.display = 'grid';

            const heatmapData = statsData.heatmap_data;
            const days = ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'];
            
            // Crear etiquetas de d√≠as
            for (let day = 0; day < 7; day++) {
                const dayLabel = document.createElement('div');
                dayLabel.textContent = days[day];
                dayLabel.style.gridColumn = '1';
                dayLabel.style.gridRow = day + 2;
                dayLabel.style.display = 'flex';
                dayLabel.style.alignItems = 'center';
                dayLabel.style.justifyContent = 'center';
                dayLabel.style.color = 'var(--text-secondary)';
                dayLabel.style.fontSize = '0.8rem';
                heatmap.appendChild(dayLabel);
            }
            
            // Crear etiquetas de horas
            for (let hour = 0; hour < 24; hour++) {
                const hourLabel = document.createElement('div');
                hourLabel.textContent = hour;
                hourLabel.style.gridColumn = hour + 2;
                hourLabel.style.gridRow = '1';
                hourLabel.style.display = 'flex';
                hourLabel.style.alignItems = 'center';
                hourLabel.style.justifyContent = 'center';
                hourLabel.style.color = 'var(--text-secondary)';
                hourLabel.style.fontSize = '0.7rem';
                heatmap.appendChild(hourLabel);
            }
            
            // Crear celdas del heatmap
            for (let day = 0; day < 7; day++) {
                for (let hour = 0; hour < 24; hour++) {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    cell.style.gridColumn = hour + 2;
                    cell.style.gridRow = day + 2;
                    
                    const count = heatmapData[day]?.[hour] || 0;
                    const intensity = Math.min(count / 10, 1); // Normalizar a 0-1
                    
                    // Color basado en intensidad
                    const hue = 200 + (intensity * 160); // De azul a verde
                    const saturation = 70 + (intensity * 30);
                    const lightness = 20 + (intensity * 30);
                    
                    cell.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                    cell.title = `${days[day]} ${hour}:00 - ${count} conversaciones`;
                    
                    cell.addEventListener('mouseenter', (e) => {
                        showTooltip(e, `${days[day]} ${hour}:00`, `${count} conversaciones`);
                    });
                    
                    cell.addEventListener('mouseleave', hideTooltip);
                    
                    heatmap.appendChild(cell);
                }
            }
        }

        // Crear gr√°fico de actividad por hora
        function createHourlyChart() {
            const ctx = document.getElementById('hourly-chart').getContext('2d');
            const hourlyData = statsData.hourly_activity;
            
            const labels = Array.from({length: 24}, (_, i) => i);
            const data = labels.map(hour => hourlyData[hour] || 0);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Conversaciones',
                        data: data,
                        backgroundColor: 'rgba(0, 255, 65, 0.3)',
                        borderColor: '#00ff41',
                        borderWidth: 2,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });
        }

        // Crear gr√°fico de actividad mensual
        function createMonthlyChart() {
            const ctx = document.getElementById('monthly-chart').getContext('2d');
            const monthlyData = statsData.monthly_activity;
            
            const labels = Object.keys(monthlyData).sort();
            const data = labels.map(month => monthlyData[month]);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Conversaciones',
                        data: data,
                        borderColor: '#ff0080',
                        backgroundColor: 'rgba(255, 0, 128, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#ff0080',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });
        }

        // Crear gr√°fico de actividad semanal
        function createWeeklyChart() {
            const ctx = document.getElementById('weekly-chart').getContext('2d');
            const weeklyData = statsData.weekly_activity;
            
            const labels = Object.keys(weeklyData).sort();
            const data = labels.map(week => weeklyData[week]);
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#00ff41', '#00d4ff', '#b300ff', '#ff0080', '#ffff00',
                            '#ff6b35', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#ffffff',
                                padding: 20,
                                usePointStyle: true,
                            }
                        }
                    }
                }
            });
        }

        // Crear gr√°fico de timeline
        function createTimelineChart() {
            const ctx = document.getElementById('timeline-chart').getContext('2d');
            const timelineData = statsData.timeline_data;
            
            const labels = timelineData.map(item => item.date);
            const data = timelineData.map(item => item.count);
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Conversaciones',
                        data: data,
                        backgroundColor: 'rgba(179, 0, 255, 0.6)',
                        borderColor: '#b300ff',
                        borderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'day'
                            },
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });
        }

        // Crear gr√°fico de evoluci√≥n acumulada
        function createCumulativeChart() {
            const ctx = document.getElementById('cumulative-chart').getContext('2d');
            const cumulativeData = statsData.cumulative_data;
            
            if (!cumulativeData || cumulativeData.length === 0) {
                console.warn('No hay datos acumulados disponibles');
                return;
            }
            
            const labels = cumulativeData.map(item => item.date);
            const cumulativeConversations = cumulativeData.map(item => item.cumulative_conversations);
            const dailyConversations = cumulativeData.map(item => item.daily_conversations);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Conversaciones Acumuladas',
                            data: cumulativeConversations,
                            borderColor: '#00ff41',
                            backgroundColor: 'rgba(0, 255, 65, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#00ff41',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2,
                            pointRadius: 3,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Conversaciones Diarias',
                            data: dailyConversations,
                            borderColor: '#ff0080',
                            backgroundColor: 'rgba(255, 0, 128, 0.2)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4,
                            pointBackgroundColor: '#ff0080',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 1,
                            pointRadius: 2,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#00ff41',
                            bodyColor: '#ffffff',
                            borderColor: '#00ff41',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'month'
                            },
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            ticks: {
                                color: '#00ff41'
                            },
                            grid: {
                                color: '#333333'
                            },
                            title: {
                                display: true,
                                text: 'Conversaciones Acumuladas',
                                color: '#00ff41'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            ticks: {
                                color: '#ff0080'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            title: {
                                display: true,
                                text: 'Conversaciones Diarias',
                                color: '#ff0080'
                            }
                        }
                    }
                }
            });
        }

        // Crear gr√°ficos de sentimientos
        function createSentimentCharts() {
            // Actualizar valores de sentimientos
            document.getElementById('positive-messages').textContent = 
                formatNumber(statsData.positive_messages);
            document.getElementById('negative-messages').textContent = 
                formatNumber(statsData.negative_messages);
            document.getElementById('neutral-messages').textContent = 
                formatNumber(statsData.neutral_messages);

            // Gr√°fico de evoluci√≥n del sentimiento
            const ctx1 = document.getElementById('sentiment-chart').getContext('2d');
            const sentimentData = statsData.sentiment_scores;
            
            const labels = Array.from({length: sentimentData.length}, (_, i) => i);
            
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Sentimiento',
                        data: sentimentData,
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            min: -1,
                            max: 1,
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });

            // Gr√°fico de distribuci√≥n de sentimientos
            const ctx2 = document.getElementById('sentiment-distribution').getContext('2d');
            
            new Chart(ctx2, {
                type: 'pie',
                data: {
                    labels: ['Positivos', 'Negativos', 'Neutrales'],
                    datasets: [{
                        data: [
                            statsData.positive_messages,
                            statsData.negative_messages,
                            statsData.neutral_messages
                        ],
                        backgroundColor: [
                            'rgba(0, 255, 65, 0.8)',
                            'rgba(255, 0, 128, 0.8)',
                            'rgba(255, 255, 0, 0.8)'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#ffffff',
                                padding: 20,
                                usePointStyle: true,
                            }
                        }
                    }
                }
            });
        }

        // Crear nube de palabras
        function createWordCloud() {
            const wordCloud = document.getElementById('word-cloud');
            const wordData = statsData.word_frequency;
            
            // Limpiar loading
            wordCloud.innerHTML = '';
            
            // Obtener las 50 palabras m√°s frecuentes
            const topWords = Object.entries(wordData).slice(0, 50);
            
            topWords.forEach(([word, count]) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-item';
                wordElement.textContent = `${word} (${count})`;
                
                // Tama√±o basado en frecuencia
                const size = Math.min(Math.max(count / 20, 0.8), 2.5);
                wordElement.style.fontSize = size + 'rem';
                
                // Color aleatorio
                const colors = ['#00ff41', '#00d4ff', '#b300ff', '#ff0080', '#ffff00', '#ff6b35', '#4ecdc4'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                wordElement.style.background = `linear-gradient(45deg, ${color}, ${color}88)`;
                
                wordCloud.appendChild(wordElement);
            });
        }

        // Crear gr√°ficos de contenido
        function createContentCharts() {
            // Gr√°fico de temas
            const ctx1 = document.getElementById('topics-chart').getContext('2d');
            const topicsData = statsData.topics;
            
            const labels = Object.keys(topicsData);
            const data = Object.values(topicsData);
            
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Frecuencia',
                        data: data,
                        backgroundColor: 'rgba(179, 0, 255, 0.6)',
                        borderColor: '#b300ff',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });

            // Gr√°fico de lenguajes de programaci√≥n
            const ctx2 = document.getElementById('programming-languages-chart').getContext('2d');
            const progData = statsData.programming_languages;
            
            const progLabels = Object.keys(progData);
            const progValues = Object.values(progData);
            
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: progLabels,
                    datasets: [{
                        data: progValues,
                        backgroundColor: [
                            '#00ff41', '#00d4ff', '#b300ff', '#ff0080', '#ffff00',
                            '#ff6b35', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#ffffff',
                                padding: 20,
                                usePointStyle: true,
                            }
                        }
                    }
                }
            });

            // Gr√°fico de t√©rminos t√©cnicos
            const ctx3 = document.getElementById('technical-terms-chart').getContext('2d');
            const techData = statsData.technical_terms;
            
            const techLabels = Object.keys(techData);
            const techValues = Object.values(techData);
            
            new Chart(ctx3, {
                type: 'radar',
                data: {
                    labels: techLabels,
                    datasets: [{
                        label: 'Frecuencia',
                        data: techValues,
                        backgroundColor: 'rgba(0, 212, 255, 0.2)',
                        borderColor: '#00d4ff',
                        borderWidth: 2,
                        pointBackgroundColor: '#00d4ff',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        r: {
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: '#333333'
                            }
                        }
                    }
                }
            });

            // Gr√°fico de patrones de interacci√≥n
            const ctx4 = document.getElementById('interaction-patterns-chart').getContext('2d');
            const interactionData = statsData.interaction_patterns;
            
            const interactionLabels = Object.keys(interactionData);
            const interactionValues = Object.values(interactionData);
            
            new Chart(ctx4, {
                type: 'polarArea',
                data: {
                    labels: interactionLabels,
                    datasets: [{
                        data: interactionValues,
                        backgroundColor: [
                            'rgba(0, 255, 65, 0.6)',
                            'rgba(0, 212, 255, 0.6)',
                            'rgba(179, 0, 255, 0.6)',
                            'rgba(255, 0, 128, 0.6)',
                            'rgba(255, 255, 0, 0.6)'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#ffffff',
                                padding: 20,
                                usePointStyle: true,
                            }
                        }
                    }
                }
            });
        }

        // Crear laboratorio interactivo
        function createInteractiveLab() {
            // Variables para estad√≠sticas
            let totalExperiments = 0;
            let audioPlays = 0;
            let conversationsViewed = 0;
            
            // Funci√≥n para actualizar estad√≠sticas
            function updateStats() {
                document.getElementById('total-experiments').textContent = totalExperiments;
                document.getElementById('audio-plays').textContent = audioPlays;
                document.getElementById('conversations-viewed').textContent = conversationsViewed;
            }
            
            // Funci√≥n para mostrar resultado
            function showResult(content) {
                const resultsDiv = document.getElementById('lab-results');
                resultsDiv.innerHTML = content;
            }
            
            // Bot√≥n de audio aleatorio
            document.getElementById('audio-button').addEventListener('click', () => {
                totalExperiments++;
                audioPlays++;
                updateStats();
                
                // Cargar mapeo de audios si no est√° cargado
                if (!window.audioMapping) {
                    fetch('audio_mapping.json')
                        .then(response => response.json())
                        .then(data => {
                            window.audioMapping = data;
                            playRandomAudio();
                        })
                        .catch(() => {
                            showResult(`
                                <div style="text-align: center; padding: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚ùå</div>
                                    <h3>Error al cargar audios</h3>
                                    <p>No se pudo acceder al archivo de mapeo de audios</p>
                                </div>
                            `);
                        });
                } else {
                    playRandomAudio();
                }
                
                function playRandomAudio() {
                    const convIds = Object.keys(window.audioMapping);
                    if (convIds.length === 0) {
                        showResult(`
                            <div style="text-align: center; padding: 2rem;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">üéµ</div>
                                <h3>Audios del Usuario</h3>
                                <p>No se encontraron audios enviados por ti en el export.</p>
                                <p style="color: var(--text-secondary); margin-top: 1rem;">Los audios disponibles son respuestas de ChatGPT.</p>
                                <div style="background: rgba(255,0,128,0.1); padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 4px solid var(--neon-pink);">
                                    <p><strong>üí° Nota:</strong> Los audios de voz del usuario no se incluyen en el export de ChatGPT por privacidad.</p>
                                </div>
                            </div>
                        `);
                        return;
                    }
                    
                    const randomConvId = convIds[Math.floor(Math.random() * convIds.length)];
                    const convData = window.audioMapping[randomConvId];
                    const randomAudioFile = convData.audio_files[Math.floor(Math.random() * convData.audio_files.length)];
                    
                    // Crear elemento de audio
                    const audio = document.createElement('audio');
                    audio.controls = true;
                    audio.src = randomAudioFile;
                    audio.style.width = '100%';
                    audio.style.marginTop = '1rem';
                    
                    // Informaci√≥n de la conversaci√≥n
                    const conv = convData.conversation;
                    const createTime = new Date(conv.create_time * 1000);
                    const title = conv.title || 'Sin t√≠tulo';
                    
                    showResult(`
                        <div style="padding: 1rem;">
                            <h3 style="color: var(--neon-pink); margin-bottom: 1rem;">üéµ Audio Aleatorio</h3>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                                <p><strong>üìÖ Fecha:</strong> ${createTime.toLocaleDateString('es-ES')}</p>
                                <p><strong>üè∑Ô∏è T√≠tulo:</strong> ${title}</p>
                                <p><strong>üìÅ Archivo:</strong> ${randomAudioFile.split('/').pop()}</p>
                            </div>
                            <div style="background: rgba(255,0,128,0.1); padding: 1rem; border-radius: 10px; border-left: 4px solid var(--neon-pink);">
                                <p><strong>üéß Reproductor de Audio:</strong></p>
                            </div>
                        </div>
                    `);
                    
                    // Agregar el audio al resultado
                    const resultsDiv = document.getElementById('lab-results');
                    const audioContainer = resultsDiv.querySelector('div[style*="background: rgba(255,0,128,0.1)"]');
                    audioContainer.appendChild(audio);
                }
            });
            
            // Bot√≥n de conversaci√≥n aleatoria
            document.getElementById('conversation-button').addEventListener('click', () => {
                totalExperiments++;
                conversationsViewed++;
                updateStats();
                
                // Cargar conversaciones si no est√°n cargadas
                if (!window.conversationsData) {
                    fetch('conversations.json')
                        .then(response => response.json())
                        .then(data => {
                            window.conversationsData = data;
                            showRandomConversation();
                        })
                        .catch(() => {
                            showResult(`
                                <div style="text-align: center; padding: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚ùå</div>
                                    <h3>Error al cargar conversaciones</h3>
                                    <p>No se pudo acceder al archivo de datos</p>
                                </div>
                            `);
                        });
                } else {
                    showRandomConversation();
                }
                
                function showRandomConversation() {
                    const randomConv = window.conversationsData[Math.floor(Math.random() * window.conversationsData.length)];
                    const createTime = new Date(randomConv.create_time * 1000);
                    const title = randomConv.title || 'Sin t√≠tulo';
                    
                    // Obtener todos los mensajes ordenados
                    const messages = [];
                    for (const [msgId, msgData] of Object.entries(randomConv.mapping)) {
                        if (msgData.message) {
                            const message = msgData.message;
                            const role = message.author.role;
                            const content = message.content;
                            
                            let text = '';
                            if (typeof content === 'string') {
                                text = content;
                            } else if (content.parts) {
                                text = content.parts[0] || '';
                            }
                            
                            const createTimeMsg = message.create_time;
                            messages.push({
                                role: role,
                                text: text,
                                createTime: createTimeMsg
                            });
                        }
                    }
                    
                    // Ordenar mensajes por tiempo
                    messages.sort((a, b) => a.createTime - b.createTime);
                    
                    // Crear HTML de la conversaci√≥n completa
                    let conversationHTML = `
                        <div style="padding: 1rem;">
                            <h3 style="color: var(--neon-blue); margin-bottom: 1rem;">üí¨ Conversaci√≥n Aleatoria</h3>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                                <p><strong>üìÖ Fecha:</strong> ${createTime.toLocaleDateString('es-ES')}</p>
                                <p><strong>üè∑Ô∏è T√≠tulo:</strong> ${title}</p>
                                <p><strong>üí¨ Mensajes:</strong> ${messages.length}</p>
                            </div>
                            <div style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 10px; padding: 1rem;">
                    `;
                    
                    messages.forEach((msg, index) => {
                        const msgTime = new Date(msg.createTime * 1000).toLocaleTimeString('es-ES');
                        const isUser = msg.role === 'user';
                        const bgColor = isUser ? 'rgba(0,255,65,0.1)' : 'rgba(0,212,255,0.1)';
                        const borderColor = isUser ? 'var(--neon-green)' : 'var(--neon-blue)';
                        const label = isUser ? 'üë§ T√∫' : 'ü§ñ ChatGPT';
                        
                        conversationHTML += `
                            <div style="background: ${bgColor}; padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid ${borderColor};">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <strong style="color: ${borderColor};">${label}</strong>
                                    <span style="font-size: 0.8rem; color: var(--text-secondary);">${msgTime}</span>
                                </div>
                                <div style="white-space: pre-wrap; line-height: 1.4;">${msg.text}</div>
                            </div>
                        `;
                    });
                    
                    conversationHTML += `
                            </div>
                        </div>
                    `;
                    
                    showResult(conversationHTML);
                }
            });
            
            // Bot√≥n de conversaci√≥n completa
            document.getElementById('full-conversation-button').addEventListener('click', () => {
                totalExperiments++;
                conversationsViewed++;
                updateStats();
                
                // Cargar conversaciones si no est√°n cargadas
                if (!window.conversationsData) {
                    fetch('conversations.json')
                        .then(response => response.json())
                        .then(data => {
                            window.conversationsData = data;
                            showFullConversation();
                        })
                        .catch(() => {
                            showResult(`
                                <div style="text-align: center; padding: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚ùå</div>
                                    <h3>Error al cargar conversaciones</h3>
                                    <p>No se pudo acceder al archivo de datos</p>
                                </div>
                            `);
                        });
                } else {
                    showFullConversation();
                }
                
                function showFullConversation() {
                    const randomConv = window.conversationsData[Math.floor(Math.random() * window.conversationsData.length)];
                    const createTime = new Date(randomConv.create_time * 1000);
                    const title = randomConv.title || 'Sin t√≠tulo';
                    
                    // Obtener todos los mensajes ordenados
                    const messages = [];
                    for (const [msgId, msgData] of Object.entries(randomConv.mapping)) {
                        if (msgData.message) {
                            const message = msgData.message;
                            const role = message.author.role;
                            const content = message.content;
                            
                            let text = '';
                            if (typeof content === 'string') {
                                text = content;
                            } else if (content.parts) {
                                text = content.parts[0] || '';
                            }
                            
                            const createTimeMsg = message.create_time;
                            messages.push({
                                role: role,
                                text: text,
                                createTime: createTimeMsg
                            });
                        }
                    }
                    
                    // Ordenar mensajes por tiempo
                    messages.sort((a, b) => a.createTime - b.createTime);
                    
                    // Crear HTML de la conversaci√≥n completa
                    let conversationHTML = `
                        <div style="padding: 1rem;">
                            <h3 style="color: var(--neon-yellow); margin-bottom: 1rem;">üìñ Conversaci√≥n Completa</h3>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                                <p><strong>üìÖ Fecha:</strong> ${createTime.toLocaleDateString('es-ES')}</p>
                                <p><strong>üè∑Ô∏è T√≠tulo:</strong> ${title}</p>
                                <p><strong>üí¨ Mensajes:</strong> ${messages.length}</p>
                            </div>
                            <div style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 10px; padding: 1rem;">
                    `;
                    
                    messages.forEach((msg, index) => {
                        const msgTime = new Date(msg.createTime * 1000).toLocaleTimeString('es-ES');
                        const isUser = msg.role === 'user';
                        const bgColor = isUser ? 'rgba(0,255,65,0.1)' : 'rgba(0,212,255,0.1)';
                        const borderColor = isUser ? 'var(--neon-green)' : 'var(--neon-blue)';
                        const label = isUser ? 'üë§ T√∫' : 'ü§ñ ChatGPT';
                        
                        conversationHTML += `
                            <div style="background: ${bgColor}; padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid ${borderColor};">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <strong style="color: ${borderColor};">${label}</strong>
                                    <span style="font-size: 0.8rem; color: var(--text-secondary);">${msgTime}</span>
                                </div>
                                <div style="white-space: pre-wrap; line-height: 1.4;">${msg.text}</div>
                            </div>
                        `;
                    });
                    
                    conversationHTML += `
                            </div>
                        </div>
                    `;
                    
                    showResult(conversationHTML);
                }
            });
            
            // Bot√≥n de los primeros 10 audios del usuario
            document.getElementById('first-audio-button').addEventListener('click', () => {
                totalExperiments++;
                audioPlays++;
                updateStats();
                
                // Cargar informaci√≥n de los primeros 10 audios
                fetch('first_user_audio.json')
                    .then(response => response.json())
                    .then(data => {
                        if (data.found === false) {
                            showResult(`
                                <div style="text-align: center; padding: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üé§</div>
                                    <h3 style="color: var(--neon-orange);">Primeros 10 Audios del Usuario</h3>
                                    <p>No se encontraron audios enviados por ti en el export.</p>
                                    <div style="background: rgba(255,107,53,0.1); padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 4px solid var(--neon-orange);">
                                        <p><strong>üí° Informaci√≥n:</strong></p>
                                        <p>Los audios de voz del usuario no se incluyen en el export de ChatGPT por privacidad.</p>
                                        <p>El export solo contiene audios de respuesta de ChatGPT.</p>
                                    </div>
                                    <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                                        <p><strong>üìä Estad√≠sticas:</strong></p>
                                        <p>‚Ä¢ Total de archivos de audio encontrados: 124</p>
                                        <p>‚Ä¢ Todos son respuestas de ChatGPT</p>
                                        <p>‚Ä¢ Conversaciones con audio: 7</p>
                                    </div>
                                </div>
                            `);
                        } else {
                            let audiosHTML = `
                                <div style="padding: 1rem;">
                                    <h3 style="color: var(--neon-orange); margin-bottom: 1rem;">üé§ Primeros ${data.total_found} Audios del Usuario</h3>
                                    <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                                        <p><strong>üìä Total encontrados:</strong> ${data.total_found} audios</p>
                                        <p><strong>üìÖ Rango de fechas:</strong> ${data.audios[0].conv_date} - ${data.audios[data.audios.length-1].conv_date}</p>
                                    </div>
                                    <div style="max-height: 500px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 10px; padding: 1rem;">
                            `;
                            
                            data.audios.forEach((audio, index) => {
                                const audioElement = document.createElement('audio');
                                audioElement.controls = true;
                                audioElement.src = audio.audio_file;
                                audioElement.style.width = '100%';
                                audioElement.style.marginTop = '0.5rem';
                                
                                audiosHTML += `
                                    <div style="background: rgba(255,107,53,0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--neon-orange);">
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                            <strong style="color: var(--neon-orange);">üé§ Audio #${index + 1}</strong>
                                            <span style="font-size: 0.8rem; color: var(--text-secondary);">${audio.duration}s</span>
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
                                            <p><strong>üìÖ Fecha:</strong> ${audio.conv_date}</p>
                                            <p><strong>üìÅ Archivo:</strong> ${audio.audio_file.split('/').pop()}</p>
                                            <p><strong>üíæ Tama√±o:</strong> ${Math.round(audio.size_bytes / 1024)} KB</p>
                                        </div>
                                        <div id="audio-container-${index}"></div>
                                    </div>
                                `;
                            });
                            
                            audiosHTML += `
                                    </div>
                                </div>
                            `;
                            
                            showResult(audiosHTML);
                            
                            // Agregar los elementos de audio despu√©s de mostrar el HTML
                            setTimeout(() => {
                                data.audios.forEach((audio, index) => {
                                    const audioElement = document.createElement('audio');
                                    audioElement.controls = true;
                                    audioElement.src = audio.audio_file;
                                    audioElement.style.width = '100%';
                                    audioElement.style.marginTop = '0.5rem';
                                    
                                    const container = document.getElementById(`audio-container-${index}`);
                                    if (container) {
                                        container.appendChild(audioElement);
                                    }
                                });
                            }, 100);
                        }
                    })
                    .catch(() => {
                        showResult(`
                            <div style="text-align: center; padding: 2rem;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">‚ùå</div>
                                <h3>Error al cargar informaci√≥n</h3>
                                <p>No se pudo acceder al archivo de informaci√≥n de los audios</p>
                            </div>
                        `);
                    });
            });
        }

        // Mostrar tooltip
        function showTooltip(event, title, content) {
            const tooltip = document.getElementById('tooltip');
            const tooltipTitle = document.getElementById('tooltip-title');
            const tooltipContent = document.getElementById('tooltip-content');
            
            tooltipTitle.textContent = title;
            tooltipContent.textContent = content;
            
            tooltip.style.left = event.pageX + 15 + 'px';
            tooltip.style.top = event.pageY - 30 + 'px';
            tooltip.style.opacity = '1';
        }

        // Ocultar tooltip
        function hideTooltip() {
            document.getElementById('tooltip').style.opacity = '0';
        }

        // Mostrar error
        function showError(message) {
            const container = document.querySelector('.container');
            const errorDiv = document.createElement('div');
            errorDiv.style.cssText = `
                background: linear-gradient(135deg, #ff0080, #b300ff);
                color: white;
                padding: 2rem;
                border-radius: 15px;
                text-align: center;
                margin: 2rem 0;
                font-size: 1.2rem;
                box-shadow: 0 0 30px rgba(255, 0, 128, 0.5);
            `;
            errorDiv.textContent = message;
            container.insertBefore(errorDiv, container.firstChild);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            setupNavigation();
            loadData();
        });
    </script>
</body>
</html>
